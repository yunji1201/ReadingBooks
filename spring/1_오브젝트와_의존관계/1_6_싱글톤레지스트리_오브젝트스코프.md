# 1.6 싱글톤 레지스트리와 오브젝트 스코프

## 1.6.1 싱글톤 레지스트리로서의 애플리케이션 컨텍스트

### DaoFactory VS @Configuration, @Bean

- DaoFactory의 UserDao를 가져올 때마다 다름.
- getBean() 호출할 때 마다 가져온 오브젝트가 같음.

  ⇒ 스프링은 여러 번 빈을 요청해도 매번 동일한 오브젝트를 리턴함.

  ⇒ 싱글톤 레지스트리(Singleton registry)

## 1.6.2 싱글톤과 오브젝트의 상태

### 스프링은 왜 싱글톤으로 빈을 만들까

- 스프링은 대부분 서버환경에서 사용
- 매번 클라이언트 요청마다 각 로직을 담당하는 오브젝트를 새로 생성 ⇒ 서버 부하
- 서브릿 클래스당 하나의 오브젝트만 만들고, 사용자 요청을 담당하는 여러 스레드에서 하나의 오브젝트를 공유해 동시에 사용

### 싱글톤의 단점

- private 생성자를 갖고 있기 때문에 상속할 수 없음.(밖에서 오브젝트 생성하지 못하도록)
- 테스트가 힘듦.(만들어지는 방식이 제한적이라 목 오브젝트 등으로 대체하기 어려움)
- 서버환경에서는 싱글톤이 하나만 만들어지는 것을 보장X(JVM 분산될 경우, 독립적인 오브젝트 생성)
- 전역 상태를 만들 수 있기 때문에 바람직하지 않음.(아무 객체나 자유롭게 접근, 수정, 공유할 수 있는 것은 바람직X)

### 싱글톤 레지스트리

- 스프링에서 싱글톤 형태의 오브젝트를 만들고 관리하는 기능
    - 멀티스레드 환경이라면 여러 스레드가 동시에 접근 가능하기 때문에, 무상태 방식으로 만들어야 함.
    - 읽기 전용 값이라면 초기화 시점에서 인스턴스 변수에 저장해두고 공유하는 것은 무관함.

## 1.6.3 스프링 빈의 스코프

- 스프링이 관리하는 오브젝트의 생성, 존재, 적용되는 범위
    - 스프링 빈의 기본 스코프는 싱글톤
    - 컨테이너 내에 한 개의 오브젝트만 만들어져서, 강제로 제거하지 않는 한 스프링 컨테이너가 존재하는 동안 유지